version: 1
frontend:
  phases:
    # Fase de PRE-BUILD: Moverse e instalar dependencias
    preBuild:
      commands:
        # Paso 1: Moverse al directorio del frontend (si ya lo tenías así)
        - cd Client-react 
        # Paso 2: Usar --legacy-peer-deps para forzar la instalación
        - npm install --legacy-peer-deps  # <-- ¡CAMBIO CLAVE!
    # Fase de BUILD: Ejecutar el build
    build:
      commands:
        - npm run build
  # Artefactos: Definir la ruta COMPLETA del código compilado
  artifacts:
    baseDirectory: Client-react/dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
