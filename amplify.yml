version: 1
frontend:
  phases:
    # 1. Fase de PRE-BUILD: Entrar a la carpeta del frontend e instalar
    preBuild:
      commands:
        - cd Client-react  # <-- ¡CRÍTICO! Moverse al directorio del package.json
        - npm install --legacy-peer-deps # <-- CRÍTICO! Solución al error ERESOLVE
    # 2. Fase de BUILD: Ejecutar el build dentro de Client-react
    build:
      commands:
        - npm run build
  # 3. Artefactos: Definir la ruta COMPLETA del código compilado (desde la raíz del repositorio)
  artifacts:
    baseDirectory: Client-react/dist # <-- ¡CRÍTICO! Ruta completa para el hosting
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
